*** Settings ***
Documentation       This keywords suite define API operation
Library             HttpLibrary.HTTP
Library             ../pylibrary/JsonParser.py
# Example #### Description imported Json Library function
# Search Key Value : Search dict Key match special Value in Json, return match dict
# Query Key : Return dict Key for input Json
# Query Keyword Value : Return the value for match dict keyword
# URL Encode : Return Value by URL Encode
# URL Json Encode : Return List/Array by URL Encode
Resource            ./defaultconfig.txt

*** Keywords ***
# Example #### Description API function by API document, default configuration import from resource file "defaultconfig.txt"
# GET /ezs3/json/initiator_group_delete, Delete specified iSCSI/FC initiator groups.
CGI Initiator Group Delete
    [Arguments]    ${gateway_group}=${DEFAULT GATEWAY GROUP}    ${group_ids}=[]
    ${group_ids_urlencode}=    URL Encode    ${group_ids}
    Return Code Should be    /cgi-bin/ezs3/json/initiator_group_delete?gateway_group=${gateway_group}&group_ids=${group_ids_urlencode}    0

# GET /ezs3/json/initiator_group_list, List all iSCSI/FC initiator groups of a virtual storage.
CGI Initiator Group List
    [Arguments]    ${gateway_group}=${DEFAULT GATEWAY GROUP}
    ${initiator_entry}=    Get Return Json    /cgi-bin/ezs3/json/initiator_group_list?gateway_group=${gateway_group}    /response
    ${initiator_entry_parse}=    Parse Json    ${initiator_entry}
    [Return]    ${initiator_entry_parse}

# GET /ezs3/json/iscsi_list, Return a list of volumes of a iSCSI/FC target exported by a virtual storage.
CGI iSCSI List
    [Arguments]    ${target_id}=
    ${target_id_urlencode}=    URL Encode    ${target_id}
    ${iscsi_list}=    Get Return Json    /cgi-bin/ezs3/json/iscsi_list?target_id=${target_id_urlencode}    /response
    ${iscsi_list_parse}=    Parse Json    ${iscsi_list}
    [Return]    ${iscsi_list_parse}
